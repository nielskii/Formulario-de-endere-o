<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Endereço</title>
    <link rel="shortcut icon" href="./img/logo_correio.ico" type="image/x-icon">
    <style>
        body {
            box-sizing: content-box;
            font-family: Arial, Helvetica, sans-serif;
            
        }
        .header{
            text-align: center;
        }
        .container{
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        form{
            width:500px;
        }
        .form>form>label,input{
            display: block;   
        }
        fieldset{
            border-radius: 8px;
        }
        legend {
            padding: 20px 2px;
            font-size: 20px;
            text-align: left;

        }
        input{
            width: 95%;
            border-radius: 8px;
            height: 35px;
            outline: 0;
            border: 0;
            background-color:#d9d9d9;
            padding-left: 15px;
            margin: 3px;
        }
        button{
            margin-top: 10px;
            width: 100%;
            height: 35px;
            border-radius: 8px;
            border: 0;
            outline: 0;
            background-color: #024873;
            color: white;
            font-size: 15px;
        }
        button:hover{
            background-color: #049DD9;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="./img/correio.png" alt="logo correio">
    </div>
    <div class="container">
        <div class="form">
            <form action="index.html" method="get" autocomplete="off">
                <fieldset>
                    <legend>Dados para o Endereço</legend>
                    <label for="CEP"><span>CEP:</span></label>
                    <input id="cep" type="text" placeholder="Ex: 22020-002" required>
                    <label for="LOGRADOURO"><span>Logradouro</span></label>
                    <input id="logradouro" type="text" name="logradouro" placeholder="Ex: Avenida Nossa Senhora Copacabana">
                    <label for="BAIRRO"><span>Bairro:</span></label>
                    <input id="bairro" type="text" name="bairro" placeholder="Ex: Copacabana" >
                    <label for="CIDADE"><span>Cidade:</span></label>
                    <input id="cidade" type="text" name="cidade" placeholder="Ex: Rio de Janeiro">
                    <label for="REGIAO"><span>Região:</span></label>
                    <input id="regiao" type="text" name="regiao" placeholder="Ex: Sudeste">
                    <label for="Estado"><span>Estado:</span></label>
                    <input id="estado" type="text" name="estado" placeholder="Ex: Rio de Janeiro">
                    <button type="submit" onclick="buscarCep(event)">Buscar</button>
                </fieldset>
            </form>
        </div>
    </div>

    <script>
         function Alert_CEP(){
            document.querySelector('button[type="submit"]').addEventListener('click',function(event){
                event.preventDefault();
                const cepValor = document.getElementById('cep').value;
                window.alert('O CEP informado é: ' + cepValor);
            });
        }
        Alert_CEP();
        function buscarCep(event){
            event.preventDefault();
            let cep = document.querySelector('#cep').value;
            let url = `http://viacep.com.br/ws/${cep}/json/`;
            fetch(url)
            .then(function(response){
                return response.json()
                })
            .then(function(data){
                console.log("Dados recebidos:",data)
                preenchimentoCep(data)
            })
            .catch(function(error){
                console.error("Erro ao buscar o CEP: ",error)
            })
            }
        
        function preenchimentoCep(dados){
            document.querySelector('input[name="logradouro"]').value = dados.logradouro || ' ';
            document.querySelector('input[name="bairro"]').value = dados.bairro || ' ';
            document.querySelector('input[name="cidade"]').value = dados.localidade || ' ';
            document.querySelector('input[name="regiao"]').value = dados.regiao || ' ';
            document.querySelector('input[name="estado"]').value = dados.uf || ' ';

        }
    </script>
</body>
</html>